<div class="container-fluid">
  <div class="row mt-2">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header bg-dark text-white">
          <div class="row">
            <div class="col-md-12 col-12 col-sm-12">
              <h5><i class="fa fa-filter mt-1" aria-hidden="true"></i>&nbsp;Filter Vendor Data</h5>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-12" *ngIf="showBlock">
                      <div class="card">
                        <div class="card-body" style="background: rgb(244, 241, 241);">
                          <div class="row">
                            <div class="col-md-2">
                              <label class="fw-bold mb-1">Vendor Name</label>
                              <input type="text" class="form-control" name="vendorName"
                                [(ngModel)]="vendorByFilterObj.vendorName" pInputText placeholder="Enter Vendor Name">
                            </div>
                            <div class="col-md-2">
                              <label class="fw-bold mb-1">Contact Number</label>
                              <input type="text" class="form-control" name="contactNo"
                                [(ngModel)]="vendorByFilterObj.contactNo" pInputText placeholder="Enter Contact Number">
                            </div>
                            <div class="col-md-2">
                              <label class="fw-bold mb-1">GST Number</label>
                              <input type="text" class="form-control" name="gstNo"
                                [(ngModel)]="vendorByFilterObj.gstNo" pInputText placeholder="Enter GST Number">
                            </div>
                            <div class="col-md-2">
                              <label class="fw-bold mb-1">District</label>
                              <p-dropdown name="districtName" [options]="districtArr" [(ngModel)]="selectedDistrictId"
                                (onChange)="getAllCitiesByDistrictId()" optionLabel="districtName"
                                optionValue="districtId" [filter]="true" filterBy="districtName" [showClear]="true"
                                placeholder="Select District" [editable]="true" [style]="{'width':'100%'}"
                                [appendTo]="'body'">
                              </p-dropdown>
                            </div>
                            <div class="col-md-2">
                              <label class="fw-bold mb-1">City</label>
                              <p-dropdown name="cityName" [options]="cityArr" [(ngModel)]="selectedCityId"
                                (onChange)="getAllTalukaByCityId()" optionLabel="cityName" optionValue="cityId"
                                [filter]="true" filterBy="cityName" [showClear]="true" placeholder="Select City"
                                [editable]="true" [style]="{'width':'100%'}" [appendTo]="'body'">
                              </p-dropdown>
                            </div>
                            <div class="col-md-2">
                              <label class="fw-bold mb-1">Taluka</label>
                              <p-dropdown name="talukaName" [options]="talukaArr" [(ngModel)]="vendorByFilterObj.shopTalukaId"
                                optionLabel="talukaName" optionValue="shopTalukaId" [filter]="true" filterBy="talukaName"
                                [showClear]="vendorByFilterObj.shopTalukaId !== 0" placeholder="Select Taluka"
                                [editable]="true" [style]="{'width':'100%'}" [appendTo]="'body'">
                              </p-dropdown>
                            </div>
                          </div>
                          <div class="row mt-4">
                            <div class="col-md-12 col-12 text-center">
                              <div>
                                <button pButton pRipple type="button" icon="pi pi-filter" id="custom-small-button"
                                  class="p-button-rounded p-button-success me-2" (click)="filterByVendor()"></button>
                                <button pButton pRipple type="button" icon="pi pi-times" id="custom-small-button"
                                  class="p-button-rounded p-button-danger" (click)="onResetFilterByVendor()"></button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row mt-3">
                      <div class="col-md-12">
                        <p-table [value]="vendorArr" [paginator]="true" [rows]="10"
                          currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                          [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50,75,100,150]"
                          styleClass="p-datatable-gridlines p-datatable-sm" [responsive]="true">
                          <ng-template pTemplate="header">
                            <tr class="button-cell">
                              <th>Sr</th>
                              <th pSortableColumn="vendorName">Vendor Name <p-sortIcon field="vendorName"></p-sortIcon></th>
                              <th pSortableColumn="contactNo">Contact Number <p-sortIcon field="contactNo"></p-sortIcon></th>
                              <th pSortableColumn="gstNo">GST Number <p-sortIcon field="gstNo"></p-sortIcon></th>
                              <th pSortableColumn="districtName">District <p-sortIcon field="districtName"></p-sortIcon></th>
                              <th pSortableColumn="talukaName">Taluka <p-sortIcon field="talukaName"></p-sortIcon></th>
                              <th pSortableColumn="cityName">City <p-sortIcon field="cityName"></p-sortIcon></th>
                              <th>Action</th>
                            </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-item let-sr="rowIndex">
                            <tr class="button-cell">
                              <td>{{sr+1}}</td>
                              <td>{{item.vendorName}}</td>
                              <td>{{item.contactNo}}</td>
                              <td>{{item.gstNo}}</td>
                              <td>{{item.districtName}}</td>
                              <td>{{item.talukaName}}</td>
                              <td>{{item.cityName}}</td>
                              <td>
                                <i class="pi pi-pencil text-primary hand me-2" style="font-size: 1.2rem" (click)="onEdit(item.vendorId)"></i>
                                <i class="pi pi-trash text-danger hand" style="font-size: 1.2rem" (click)="onDelete(item.vendorId)"></i>
                              </td>
                            </tr>
                          </ng-template>
                          <ng-template pTemplate="emptymessage">
                            <tr>
                              <td colspan="8" class="text-center">No Record Found</td>
                            </tr>
                          </ng-template>
                        </p-table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
